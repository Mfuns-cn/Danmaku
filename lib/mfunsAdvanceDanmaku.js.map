{"version":3,"file":"mfunsAdvanceDanmaku.js","mappings":"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","sources":["webpack://mf-ade/./node_modules/css-loader/dist/runtime/api.js","webpack://mf-ade/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://mf-ade/./css/base.css","webpack://mf-ade/./css/base.css?3901","webpack://mf-ade/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://mf-ade/./src/Context/Context.ts","webpack://mf-ade/./src/Controller/Controller.ts","webpack://mf-ade/./src/Event/DanmakuEvent.ts","webpack://mf-ade/./src/Event/DanmakuEventType.ts","webpack://mf-ade/./src/Factory/AnimationFactory.ts","webpack://mf-ade/./src/Factory/DanmakuParser/DanmakuFactory.ts","webpack://mf-ade/./src/Factory/DanmakuParser/DanmakuParserFactory.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/CodeDanmakuParser.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuDefaultAttr.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuDelay.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuExtends.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuPosititon.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuThen.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/DanmakuValidate.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/PostprocessPipe.ts","webpack://mf-ade/./src/Factory/DanmakuParser/codeDanmaku/PreprocessPipe.ts","webpack://mf-ade/./src/Factory/DanmakuParser/model7Danmaku/Mode7DanmakuParser.ts","webpack://mf-ade/./src/Factory/RendererFactory.ts","webpack://mf-ade/./src/Factory/TimeLineFactort.ts","webpack://mf-ade/./src/TimeLine/AdvancedLine.ts","webpack://mf-ade/./src/core/Animation/Base/Cubic.ts","webpack://mf-ade/./src/core/Animation/Base/CubicAnimations.ts","webpack://mf-ade/./src/core/Animation/Base/Matrix.ts","webpack://mf-ade/./src/core/Animation/Base/OriginAnimations.ts","webpack://mf-ade/./src/core/Animation/CompositeAnimation/GroupAnimations.ts","webpack://mf-ade/./src/core/Animation/CompositeAnimation/ListAnimations.ts","webpack://mf-ade/./src/core/Animation/CompositeAnimation/RepeatAnimations.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/RotationAnimation.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/RotationXAnimation.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/RotationYAnimation.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/RotationZAnimation.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/ScaleAnimations.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/StaticAnimation.ts","webpack://mf-ade/./src/core/Animation/TransformsAnimations/TranslateAnimation.ts","webpack://mf-ade/./src/core/Animation/styleAnimations/OpacityAnimations.ts","webpack://mf-ade/./src/core/Danmaku/BaseDanmaku.ts","webpack://mf-ade/./src/core/Renderer/BaseRenderer.ts","webpack://mf-ade/./src/core/Renderer/CSS3Renderer/CSS3Renderer.ts","webpack://mf-ade/./src/core/Renderer/CSS3Renderer/CssDanmakuObj.ts","webpack://mf-ade/./src/core/Stage/BaseStage.ts","webpack://mf-ade/./src/core/Stage/CodeDanmakuStage.ts","webpack://mf-ade/./src/core/Stage/Model7Stage.ts","webpack://mf-ade/./src/core/Style/Unit/Color.ts","webpack://mf-ade/./src/core/Style/Unit/PxSize.ts","webpack://mf-ade/./src/i18n/index.ts","webpack://mf-ade/./src/i18n/zh-cn.ts","webpack://mf-ade/./src/util/UnitTools.ts","webpack://mf-ade/./src/util/deepMerge.ts","webpack://mf-ade/webpack/bootstrap","webpack://mf-ade/webpack/runtime/compat get default export","webpack://mf-ade/webpack/runtime/define property getters","webpack://mf-ade/webpack/runtime/hasOwnProperty shorthand","webpack://mf-ade/webpack/runtime/make namespace object","webpack://mf-ade/./src/index.ts"],"sourcesContent":["\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".danmaku-containers {\\n  position: relative;\\n}\\n.danmaku-containers * {\\n  box-sizing: border-box;\\n  transform-style: preserve-3d;\\n  margin: 0;\\n  padding: 0;\\n  font-size: 40px;\\n  image-rendering: pixelated; /* 小图片放大后像素不虚化 */\\n  image-rendering: -moz-crisp-edges;\\n  line-height: 1;\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, STHeiTi, Arial, sans-serif;\\n  color: #000;\\n  border: none;\\n  background: none;\\n}\\n.danmaku-containers .stage {\\n  position: absolute;\\n  overflow: hidden;\\n  perspective: 1000px;\\n  transform-style: preserve-3d;\\n}\\n.danmaku-containers-debug * {\\n  outline: 1px solid red;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/base.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;AACpB;AACA;EACE,sBAAsB;EACtB,4BAA4B;EAC5B,SAAS;EACT,UAAU;EACV,eAAe;EACf,0BAA0B,EAAE,gBAAgB;EAC5C,iCAAiC;EACjC,cAAc;EACd,oEAAoE;EACpE,WAAW;EACX,YAAY;EACZ,gBAAgB;AAClB;AACA;EACE,kBAAkB;EAClB,gBAAgB;EAChB,mBAAmB;EACnB,4BAA4B;AAC9B;AACA;EACE,sBAAsB;AACxB\",\"sourcesContent\":[\".danmaku-containers {\\n  position: relative;\\n}\\n.danmaku-containers * {\\n  box-sizing: border-box;\\n  transform-style: preserve-3d;\\n  margin: 0;\\n  padding: 0;\\n  font-size: 40px;\\n  image-rendering: pixelated; /* 小图片放大后像素不虚化 */\\n  image-rendering: -moz-crisp-edges;\\n  line-height: 1;\\n  font-family: \\\"Helvetica Neue\\\", Helvetica, STHeiTi, Arial, sans-serif;\\n  color: #000;\\n  border: none;\\n  background: none;\\n}\\n.danmaku-containers .stage {\\n  position: absolute;\\n  overflow: hidden;\\n  perspective: 1000px;\\n  transform-style: preserve-3d;\\n}\\n.danmaku-containers-debug * {\\n  outline: 1px solid red;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!./base.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","/**\n * 全局上下文\n */\nexport class Context {\n  /**\n   * 当前语言\n   */\n  public static language: string = \"zh-cn\";\n  public static debug = true;\n}\n","import { SizeInterface } from \"../core/Style/SizeInterface\";\nimport { StageInterface } from \"../core/Stage/StageInterface\";\nimport { Context } from \"../Context/Context\";\nimport { I18n } from \"../i18n\";\nimport { CanvasStyle } from \"../core/Style/CanvasStyle\";\nimport { PxSize } from \"../core/Style/Unit/PxSize\";\nimport { TimeLineFactory } from \"../Factory/TimeLineFactort\";\nimport { DanmakuEvent } from \"../Event/DanmakuEvent\";\nimport { DanmakuEventType } from \"../Event/DanmakuEventType\";\nimport { RendererFactory } from \"../Factory/RendererFactory\";\nimport { DanmakuParserFactory } from \"../Factory/DanmakuParser/DanmakuParserFactory\";\n\n/**\n * 控制器 ，统一管理整个弹幕系统\n * 在这里，每种弹幕类型都会得到一个舞台对象，进行渲染\n */\nexport class Controller {\n  /**\n   * 画布对象\n   */\n  protected containers: HTMLElement;\n  /**\n   * 实时的Css样式表\n   */\n  protected canvasStyle: CSSStyleDeclaration;\n  /**\n   * 舞台列表\n   */\n  protected stageList: StageInterface[] = [];\n  /**\n   * 暂停状态\n   */\n  protected pauseStatus: boolean = true;\n  /**\n   * 时间戳\n   */\n  protected timeStamp: number = 0;\n  /**\n   * 播放的时间\n   */\n  protected time: number = 0;\n  /**\n   * 跳转状态\n   */\n  public skipStatus: boolean = false;\n\n  /**\n   * 弹幕获取器函数列表\n   */\n  protected danmakuFunction: {\n    [type: string]: (send: (str: string[]) => void) => void;\n  } = {};\n\n  constructor(containers: HTMLElement) {\n    this.containers = containers;\n    // 获取实时的style对象，当大小发生变化时，会更新自身\n    this.canvasStyle = window.getComputedStyle(containers);\n    // 初始化容器\n    this.initContainer();\n    let that = this;\n    (function animloop() {\n      if (!that.pauseStatus) {\n        that.refresh();\n      }\n      requestAnimationFrame(animloop);\n    })();\n  }\n  /**\n   * 获得容器尺寸\n   */\n  public getContainersSize(): SizeInterface {\n    return {\n      width: new PxSize(parseInt(this.canvasStyle.width, 10)),\n      height: new PxSize(parseInt(this.canvasStyle.height, 10)),\n    };\n  }\n  /**\n   * 将一个舞台添加到容器内\n   * @param stage 舞台\n   * @param index 排列顺序\n   * @returns 成功与失败的状态\n   */\n  public registStage(stage: StageInterface, index: number): boolean {\n    // 检查列表中是否存在\n    if (this.stageList[index]) {\n      return false;\n    }\n    this.stageList[index] = stage;\n    return true;\n  }\n  /**\n   * 将舞台挂载到容器中\n   */\n  public mount() {\n    // console.info(I18n.t(\"Start mount stage\"));\n    // 遍历每一个舞台\n    this.stageList.forEach((stage, key) => {\n      // 获取一个div\n      let div = this.getDIV();\n      // 给舞台初始化渲染器\n      let render = RendererFactory.getRenderInstance(stage.rendererType());\n      // 将div挂载到渲染器\n      render.setCanvasContainer(div);\n      // 设置舞台渲染器\n      stage.stageRenderer(render);\n      // 设置舞台时间轴\n      let lineType = stage.timeLineType();\n      let timeline = TimeLineFactory.getTimeLine(lineType);\n      stage.timeLine(timeline);\n      // 检察是否存在弹幕获取器\n      let attachedType = stage.attachedType();\n      if (this.danmakuFunction[attachedType]) {\n        // 如果存在，就获取弹幕\n        this.resetDanmaku(key);\n      } else {\n        console.warn(I18n.t(\"danmaku get function is null :\" + attachedType));\n      }\n\n      // 更新渲染器内画布样式\n      render.updateCanvasStyle(this.getCanvasStylByStage(stage));\n    });\n  }\n\n  /**\n   * 初始化弹幕容器\n   */\n  protected initContainer() {\n    if (Context.debug) {\n      // debug模式\n      this.containers.classList.add(\"danmaku-containers-debug\");\n    }\n    this.containers.classList.add(\"danmaku-containers\");\n  }\n\n  /**\n   * 重置尺寸\n   */\n  public resize() {\n    // 重置舞台的尺寸\n    this.stageList.forEach((stage) => {\n      let render = stage.getRenderer();\n      if (render) {\n        render.updateCanvasStyle(this.getCanvasStylByStage(stage));\n      }\n    });\n  }\n\n  /**\n   * 创建div容器\n   */\n  protected getDIV(): HTMLElement {\n    let div = document.createElement(\"div\");\n    div.classList.add(\"stage\");\n    this.containers.appendChild(div);\n    return div;\n  }\n\n  /**\n   * 根据舞台对象创建一个canvasStyle\n   * @param stage 舞台对象\n   * @returns\n   */\n  protected getCanvasStylByStage(stage: StageInterface): CanvasStyle {\n    let size = stage.stageSize(this.getContainersSize());\n    let color = stage.stageBackgroundColor(this.getContainersSize());\n    let pos = stage.stagePosition(this.getContainersSize(), size);\n    return { position: pos, color: color, size: size };\n  }\n\n  public refresh() {\n    this.time = Date.now() - this.timeStamp;\n    // 通知每个舞台刷新\n    this.stageList.forEach((stage) => {\n      // console.log(1)\n      stage.refresh(this.time);\n    });\n  }\n\n  /**\n   * 暂停\n   */\n  public pause() {\n    if (!this.pauseStatus) {\n      this.pauseStatus = true;\n    }\n  }\n\n  /**\n   * 播放\n   */\n  public start() {\n    if (this.pauseStatus) {\n      // 同步时间\n      this.timeStamp = Date.now() - this.time;\n      this.pauseStatus = false;\n    }\n  }\n\n  /**\n   * 跳转\n   */\n  public skip(time: number) {\n    if (this.pauseStatus) {\n      // 如果是暂停状态\n      this.time = time;\n    } else {\n      // 否则使用这个方法\n      this.timeStamp = Date.now() - time;\n    }\n  }\n\n  /**\n   * 重置整个系统\n   */\n  public reset() {\n    // 清空所有舞台\n    this.stageList.forEach((stage) => {\n      stage.reset();\n    });\n    // 触发弹幕舞台重置事件\n    DanmakuEvent.dispatch(DanmakuEventType.DANMAKU_STAGE_RESET, {});\n\n    this.pauseStatus = true;\n    this.timeStamp = 0;\n    this.time = 0;\n    this.skipStatus = false;\n  }\n\n  /**\n   * 获取弹幕当前时间\n   * @returns number\n   */\n  public getTime(): number {\n    return this.time;\n  }\n\n  /**\n   * 添加弹幕获取器\n   * @param type 舞台的附属类型\n   * @param fun 回调函数\n   */\n  public addGetDanmakuFunction(\n    type: string,\n    fun: (send: (str: string[]) => void) => void\n  ) {\n    this.danmakuFunction[type] = fun;\n  }\n\n  /**\n   * 重置弹幕接口\n   */\n  public resetDanmaku(type: number) {\n    // 判断舞台列表是否存在\n    if (!this.stageList[type]) {\n      return;\n    }\n\n    // 弹幕开始加载事件\n    DanmakuEvent.dispatch(DanmakuEventType.DANMAKU_LOAD_START, {});\n    // 获取当前舞台\n    let stage = this.stageList[type];\n    // 获取弹幕时间轴\n    let timeline = stage.getTimeLine();\n    // 重置时间轴\n    timeline.reset();\n    // 根据时间轴类型找到对应的弹幕获取器\n    let danmakuGetter = this.danmakuFunction[stage.attachedType()];\n    // 判断弹幕获取器是否存在\n    if (!danmakuGetter) {\n      return;\n    }\n    danmakuGetter((res: string[]) => {\n      // 解析弹幕文本\n      res.forEach((danmakuStr: string) => {\n        let parser = DanmakuParserFactory.getInstance(stage.attachedType());\n        // let parser = new CodeDanmakuParser();\n        // 遍历添加进时间轴\n        parser.parser(danmakuStr).forEach((danmaku) => {\n          console.log(danmaku.getAnimation());\n          timeline.addDanmaku(danmaku);\n        });\n        // 弹幕加载完成事件\n        DanmakuEvent.dispatch(DanmakuEventType.DANMAKU_LOAD_DONE, {});\n      });\n    });\n  }\n}\n","import { DanmakuEventType } from \"./DanmakuEventType\";\n\n/**\n * 弹幕事件工具\n */\nexport class DanmakuEvent {\n  // 事件前缀，防止冲突\n  public static prefix = \"_danmakuevent_\";\n\n  /**\n   * 包装事件名称字符串\n   * @param eventname 事件名称\n   * @returns\n   */\n  protected static buildPrefix(eventname: DanmakuEventType): string {\n    return this.prefix + eventname;\n  }\n  /**\n   * 监听弹幕事件\n   * @param eventname \n   * @param callback \n   */\n  public static listener<T>(eventname: DanmakuEventType, callback: (data: T) => void) {\n    // 封装浏览器提供的事件监听器\n    window.addEventListener(this.buildPrefix(eventname), (data: any) => {\n      callback(data.detail);\n    });\n  }\n\n  /**\n   * 触发弹幕事件\n   * @param eventname\n   * @param data\n   */\n  public static dispatch<T>(eventname: DanmakuEventType, data: T) {\n    // 包装事件\n    let event = new CustomEvent(this.buildPrefix(eventname), {\n      detail: data,\n    });\n    // 触发事件\n    window.dispatchEvent(event);\n  }\n}\n","/**\n * 弹幕事件类型枚举\n */\nexport enum DanmakuEventType {\n  /**\n   * 弹幕字符串无效\n   */\n  DANMAKU_JSON_INVALID = \"DANMAKU_JSON_INVALID\",\n  /**\n   * 单条弹幕格式错误\n   */\n  DANMAKU_FORMAT_ERROR = \"DANMAKU_FORMAT_ERROR\",\n\n  /**\n   * 弹幕开始加载\n   */\n  DANMAKU_LOAD_START = \"DANMAKU_LOAD_START\",\n\n  /**\n   * 弹幕加载完成\n   */\n  DANMAKU_LOAD_DONE = \"DANMAKU_LOAD_DONE\",\n\n  /**\n   * 弹幕舞台重置\n   */\n  DANMAKU_STAGE_RESET = \"DANMAKU_STAGE_RESET\"\n}\n","import { AnimationInterface } from \"../core/Animation/Base/AnimationInterface\";\nimport { GroupAnimations } from \"../core/Animation/CompositeAnimation/GroupAnimations\";\nimport { ListAnimations } from \"../core/Animation/CompositeAnimation/ListAnimations\";\nimport { OpacityAnimations } from \"../core/Animation/styleAnimations/OpacityAnimations\";\nimport { RepeatAnimations } from \"../core/Animation/CompositeAnimation/RepeatAnimations\";\nimport { ScaleAnimations } from \"../core/Animation/TransformsAnimations/ScaleAnimations\";\nimport { TranslateAnimation } from \"../core/Animation/TransformsAnimations/TranslateAnimation\";\nimport { RotationXAnimation } from \"../core/Animation/TransformsAnimations/RotationXAnimation\";\nimport { RotationYAnimation } from \"../core/Animation/TransformsAnimations/RotationYAnimation\";\nimport { RotationZAnimation } from \"../core/Animation/TransformsAnimations/RotationZAnimation\";\nimport { StaticAnimation } from \"../core/Animation/TransformsAnimations/StaticAnimation\";\n\nexport class AnimationFactory {\n    public static animationList = {\n        \"static\":StaticAnimation,// 静态定位\n        \"translate\":TranslateAnimation,// 平移\n        \"rotateX\":RotationXAnimation,// x轴旋转\n        \"rotateY\":RotationYAnimation,// y轴旋转\n        \"rotateZ\":RotationZAnimation,// z轴旋转\n        \"scale\":ScaleAnimations,// 缩放\n        \"list\":ListAnimations,// 动画列表\n        \"group\":GroupAnimations,// 动画组\n        \"repeat\":RepeatAnimations,// 重复动画\n        \"opacity\":OpacityAnimations\n    }\n\n    public static getAnimations(type:string,params):AnimationInterface | false{\n        if(this.animationList[type]){\n            // console.log(params);\n            let ani = new this.animationList[type]()\n            // console.log(ani);\n\n            ani.setParams(params)\n            return ani;\n        }\n        return false;\n    }\n    public static getAnimationsList(list:{key: { [idx: string]: any; }}[]):AnimationInterface[]{\n        let animationList:AnimationInterface[] = []\n\n        list?.forEach((val)=>{\n            let ani =  this.getAnimations(val[\"type\"],val)\n            if(ani){\n                animationList.push(ani);\n            }\n        })\n        return animationList\n    }\n}","import { BaseDanmaku } from \"../../core/Danmaku/BaseDanmaku\";\nimport { DanmakuItemInterface } from \"../../core/Danmaku/DanmakuItemInterface\";\n\n/**\n * 弹幕解析器工厂\n */\nexport class DanmakuFactory{\n    public static list = {\n        \"text\":BaseDanmaku\n    }\n    public static getDanmakuInstance(type:string):DanmakuItemInterface{\n        if(!this.list[type]){\n            type = \"text\"\n        }\n        return new this.list[type]()\n    }\n}","import { CodeDanmakuParser } from \"./codeDanmaku/CodeDanmakuParser\";\nimport { DanmakuParserInterface } from \"./DanmakuParserInterface\";\nimport { Model7DanmakuParser } from \"./model7Danmaku/Mode7DanmakuParser\";\n\n/**\n * 弹幕解析器简单工厂\n */\nexport class DanmakuParserFactory {\n  protected static parser = {\n    code: CodeDanmakuParser,\n    model7: Model7DanmakuParser,\n  };\n  public static getInstance(type: string): DanmakuParserInterface {\n    let instance = this.parser[type];\n    if (!instance) {\n      instance = this.parser[\"code\"];\n    }\n    return new instance();\n  }\n}\n","import { I18n } from \"../../../i18n\";\nimport { DanmakuItemInterface } from \"../../../core/Danmaku/DanmakuItemInterface\";\nimport { AnimationFactory } from \"../../AnimationFactory\";\nimport { DanmakuFactory } from \"../DanmakuFactory\";\nimport { DanmakuParserInterface } from \"../DanmakuParserInterface\";\nimport { DanmakuEvent } from \"../../../Event/DanmakuEvent\";\nimport { DanmakuEventType } from \"../../../Event/DanmakuEventType\";\nimport { PreprocessPipe } from \"./PreprocessPipe\";\nimport { PostprocessPipe } from \"./PostprocessPipe\";\n\n/**\n * JSON 格式弹幕解析器\n */\nexport class CodeDanmakuParser implements DanmakuParserInterface {\n  /**\n   * 弹幕tag列表\n   */\n  protected tagList: any[] = [];\n\n  public parser(content: string): DanmakuItemInterface[] {\n    try {\n      let json: any[] = JSON.parse(content);\n      return this.getDanmaku(json);\n    } catch (e) {\n      // 触发弹幕格式无效事件\n      DanmakuEvent.dispatch(\n        DanmakuEventType.DANMAKU_JSON_INVALID,\n        I18n.t(\"Danmaku parser fail\")\n      );\n      console.warn(I18n.t(\"Danmaku parser fail\"));\n      console.warn(e);\n      return [];\n    }\n  }\n\n  /**\n   * 获取弹幕\n   * @param obj\n   * @returns\n   */\n  public getDanmaku(obj?: any[]): DanmakuItemInterface[] {\n    let list: DanmakuItemInterface[] = [];\n    let preprocessPipe = new PreprocessPipe();\n    let postprocessPipe = new PostprocessPipe();\n    /**\n     * 遍历弹幕列表\n     */\n    obj?.forEach((json, index) => {\n      // 经过前置管道处理\n      let dan = preprocessPipe.process(json, index);\n      if (dan) {\n        // 封装 弹幕对象\n        let danmaku = DanmakuFactory.getDanmakuInstance(dan.type);\n        danmaku.setParams({\n          start: dan?.start,\n          content: dan?.content,\n          style: dan?.style,\n          animation: AnimationFactory.getAnimations(\"list\", {\n            animations: dan?.animations,\n          }), // 将列表组成一个list\n          child: this.getDanmaku(dan.childs),\n        });\n        // 后置管道处理\n        // console.log(danmaku, dan);\n\n        let danmaku2 = postprocessPipe.process(danmaku, json);\n        if (danmaku2) {\n          list.push(danmaku);\n        }\n      }\n    });\n    return list;\n  }\n}\n","import { JsonPreprocessInterface } from \"./JsonPreprocessInterface\";\n/**\n * 弹幕默认属性设置\n */\nexport class DanmakuDefaultAttr implements JsonPreprocessInterface {\n  public process(json: any, _index: number) {\n    // 添加默认的动画\n    if (!json?.animations || json?.animations === []) {\n      json.animations = [{ type: \"static\" }];\n    }\n    return json;\n  }\n}\n","import { DanmakuItemInterface } from \"../../../core/Danmaku/DanmakuItemInterface\";\nimport { JsonPostprocessInterface } from \"./JsonPostprocessInterface\";\n\nexport class DanmakuDelay implements JsonPostprocessInterface {\n  public process(\n    danmaku: DanmakuItemInterface,\n    params: any\n  ): false | DanmakuItemInterface {\n    if (params?.delay) {\n      let delay = parseInt(params.delay, 10);\n      let start = danmaku.startTime() + delay;\n      danmaku.setParams({\n        start,\n      });\n    }\n    return danmaku;\n  }\n}\n","import { deepMerge } from \"../../../util/deepMerge\";\nimport { JsonPreprocessInterface } from \"./JsonPreprocessInterface\";\n/**\n * 弹幕继承\n */\nexport class DanamkuExtends implements JsonPreprocessInterface {\n  /**\n   * id列表\n   */\n  protected idList: any[] = [];\n  public process(json: any, _index: number) {\n    let danmaku = json;\n    // 继承弹幕\n    if (danmaku?.extends) {\n      // 如果id和extend相等，直接返回\n      if (danmaku?.id === danmaku?.extends) {\n        return json;\n      }\n      // 获取父级弹幕\n\n      let parent = this.idList[json.extends];\n      if (parent) {\n        // 合并\n        danmaku = deepMerge(this.copy(parent), json);\n      }\n    }\n\n    // 标记弹幕id\n    if (json?.id) {\n      this.save(json.id, danmaku);\n    }\n    // 存储_LAST_变量\n    this.save(\"_LAST_\", danmaku);\n    return danmaku;\n  }\n  protected copy(json: any) {\n    return JSON.parse(JSON.stringify(json));\n  }\n  protected save(name: string, danmaku: any) {\n    // 如果项目存在id则加入到列表\n    let copy = this.copy(danmaku);\n    // 去掉id属性\n    delete copy.id;\n    this.idList[name] = copy;\n  }\n}\n","import { JsonPreprocessInterface } from \"./JsonPreprocessInterface\";\n\nexport class DanmakuPosition implements JsonPreprocessInterface {\n  public process(json: any, _index: number) {\n    // 当弹幕不存在动画时\n    if (!json?.animations || json?.animations === []) {\n      // 检测弹幕是否存在xyz和duration\n      let x = json?.x || 0;\n      let y = json?.y || 0;\n      let z = json?.z || 0;\n      let duration = json.duration || 1000;\n      json.animations = [\n        {\n          type: \"static\",\n          duration,\n          x,\n          y,\n          z,\n        },\n      ];\n    }\n\n    return json;\n  }\n}\n","import { DanmakuItemInterface } from \"../../../core/Danmaku/DanmakuItemInterface\";\nimport { JsonPostprocessInterface } from \"./JsonPostprocessInterface\";\n\n/**\n * Then 语法处理\n */\nexport class DanmakuThen implements JsonPostprocessInterface {\n  protected idList: number[] = [];\n  public process(\n    danmaku: DanmakuItemInterface,\n    params: any\n  ): false | DanmakuItemInterface {\n    // 设置开始时间\n    if (!params?.start && params?.then) {\n      let start = this.idList[params.then] || 0;\n      danmaku.setParams({\n        start,\n      });\n    }\n    // 计算存在id属性结束时间\n    if (params?.id) {\n      this.idList[params.id] =\n        danmaku.startTime() + danmaku.getAnimation().getDuration();\n    }\n    // _LAST_ 变量\n    this.idList[\"_LAST_\"] =\n      danmaku.startTime() + danmaku.getAnimation().getDuration();\n    return danmaku;\n  }\n}\n","import { DanmakuEvent } from \"../../../Event/DanmakuEvent\";\nimport { DanmakuEventType } from \"../../../Event/DanmakuEventType\";\nimport { I18n } from \"../../../i18n\";\nimport { JsonPreprocessInterface } from \"./JsonPreprocessInterface\";\n\n/**\n * 判断弹幕类型是否正确\n */\nexport class DanmakuValidate implements JsonPreprocessInterface {\n  public process(json: any, index: number) {\n    // 判断弹幕是否是object\n    if (typeof json !== \"object\") {\n      console.warn(\n        `${I18n.t(\"Unknown danmaku format\")} :  ${json}  index: + ${index}`\n      );\n      // 触发弹幕类型错误事件\n      DanmakuEvent.dispatch(DanmakuEventType.DANMAKU_FORMAT_ERROR, {\n        content: json,\n        index,\n      });\n      return false;\n    }\n    return json;\n  }\n}\n","import { DanmakuItemInterface } from \"../../../core/Danmaku/DanmakuItemInterface\";\nimport { DanmakuDelay } from \"./DanmakuDelay\";\nimport { DanmakuThen } from \"./DanmakuThen\";\nimport { JsonPostprocessInterface } from \"./JsonPostprocessInterface\";\n/**\n * 后渲染管道\n */\nexport class PostprocessPipe implements JsonPostprocessInterface {\n  protected list: JsonPostprocessInterface[] = [\n    new DanmakuThen(), // then 语法处理\n    new DanmakuDelay(), // delay 语法处理\n  ];\n  public process(\n    danmaku: DanmakuItemInterface,\n    params: any\n  ): DanmakuItemInterface | false {\n    let dan = danmaku;\n    this.list.forEach((value) => {\n      let dan2 = value.process(danmaku, params);\n      // 如果中途有任何一个环节出错，就退出\n      if (dan2 === false) {\n        return false;\n      }\n      dan = dan2;\n    });\n    return dan;\n  }\n}\n","import { DanmakuDefaultAttr } from \"./DanmakuDefaultAttr\";\nimport { DanamkuExtends } from \"./DanmakuExtends\";\nimport { DanmakuPosition } from \"./DanmakuPosititon\";\nimport { DanmakuValidate } from \"./DanmakuValidate\";\nimport { JsonPreprocessInterface } from \"./JsonPreprocessInterface\";\n\n/**\n * 弹幕预渲染管道\n */\nexport class PreprocessPipe implements JsonPreprocessInterface {\n  protected list: JsonPreprocessInterface[] = [\n    new DanmakuValidate(), // 弹幕格式验证\n    new DanamkuExtends(), // 弹幕继承模块\n    new DanmakuPosition(), // 弹幕xyz属性语法糖\n    new DanmakuDefaultAttr(), // 弹幕默认属性设置\n  ];\n  public process(json: any, index: number) {\n    // 初始化当前的弹幕\n    let danmaku: any = json;\n    this.list.forEach((value) => {\n      let tmpDanmaku = value.process(danmaku, index);\n      // 如果中途有任何一个环节出错，就退出\n      if (tmpDanmaku === false) {\n        return false;\n      }\n      danmaku = tmpDanmaku;\n    });\n    return danmaku;\n  }\n}\n","import { DanmakuItemInterface } from \"../../../core/Danmaku/DanmakuItemInterface\";\nimport { DanmakuEvent } from \"../../../Event/DanmakuEvent\";\nimport { DanmakuEventType } from \"../../../Event/DanmakuEventType\";\nimport { AnimationFactory } from \"../../../Factory/AnimationFactory\";\nimport { I18n } from \"../../../i18n\";\nimport { DanmakuFactory } from \"../DanmakuFactory\";\nimport { DanmakuParserInterface } from \"../DanmakuParserInterface\";\n\nexport class Model7DanmakuParser implements DanmakuParserInterface {\n  /**\n   * m7 弹幕解析器\n   * 弹幕格式示例\n   * [\n   *  {\n   *    content:string,//弹幕内容\n   *    start:number//开始时间\n   *    size:number,//文字大小\n   *    color:\"#ffffffff\"//文字颜色\n   *    blod:400,//文本粗细\n   *    shadow:true,//阴影\n   *    stroke:number,//描边\n   *    strokeColor:\"#fffffff\",//描边颜色\n   *    font:string,//字体\n   *    zIndex:1,//层级,\n   *    linear:bool,//线性动画\n   *    animations:[//动画属性\n   *      {\n   *        duration:number//动画时间\n   *        x:number,//x\n   *        y:number,//y\n   *        opacity:number//透明度\n   *        rx:number,//旋转\n   *        ry:number,\n   *        rz:number,\n   *        scale:number//缩放\n   *      },\n   *      ....\n   *    ]\n   *  }\n   * ]\n   * @param content\n   */\n\n  public parser(content: string): DanmakuItemInterface[] {\n    try {\n      let json: any[] = JSON.parse(content);\n      return this.getDanmaku(json);\n    } catch (e) {\n      // 触发弹幕格式无效事件\n      DanmakuEvent.dispatch(\n        DanmakuEventType.DANMAKU_JSON_INVALID,\n        I18n.t(\"Danmaku parser fail\")\n      );\n      console.warn(I18n.t(\"Danmaku parser fail\"));\n      console.warn(e);\n      return [];\n    }\n  }\n\n  protected getDanmaku(list: any[]): DanmakuItemInterface[] {\n    let danmakulist: DanmakuItemInterface[] = [];\n    list.forEach((danmaku) => {\n      let danmakuObj = DanmakuFactory.getDanmakuInstance(\"text\");\n      let cubic = danmaku.linear ? [0, 0, 1, 1] : [0.42, 0, 1, 1];\n      danmakuObj.setParams({\n        content: danmaku.content,\n        start: danmaku.start || 0,\n        style: this.getStyle(danmaku),\n        animation: AnimationFactory.getAnimations(\"list\", {\n          cubic,\n          animations: this.getAnimations(danmaku.animations || []),\n        }), // 将列表组成一个list,\n      });\n      danmakulist.push(danmakuObj);\n    });\n    return danmakulist;\n  }\n  protected getStyle(danmaku: any) {\n    return {\n      fontSize: `${danmaku.size || 40}px`,\n      color: danmaku.color || \"#000\",\n      fontWeight: danmaku.blod || 400,\n      textShadow: danmaku.shadow ? \"5px 5px 5px rgba(0,0,0,0.4)\" : \"\",\n      \"-webkit-text-stroke\": `${danmaku.stroke || 0}px ${\n        danmaku.strokeColor || \"#000\"\n      }`,\n      fontFamily: danmaku.font || \"黑体\",\n      zIndex: danmaku.zIndex || 1,\n    };\n  }\n  /**\n   * 封装动画\n   *  {\n   *     duration:number//动画时间\n   *     x:number,//x\n   *     y:number,//y\n   *     opacity:number//透明度\n   *     rx:number,//旋转\n   *     ry:number,\n   *     rz:number,\n   *     scale:number//缩放\n   *   }\n   * @param animations\n   */\n  protected getAnimations(animations: any[]) {\n    let animationsList: any[] = [];\n    let lastAnimation;\n\n    if (!Array.isArray(animations) || animations === []) {\n      return animationsList;\n    }\n    animations.forEach((animation) => {\n      let {\n        x: x2 = 0,\n        y: y2 = 0,\n        opacity: o2 = 1,\n        rx: rx2 = 0,\n        ry: ry2 = 0,\n        rz: rz2 = 0,\n        scale: s2 = 1,\n      } = animation;\n      if (s2 === 0) {\n        s2 = 1;\n      }\n      let danmakuObj: { type: string; animations: any[] } = {\n        type: \"group\",\n        animations: [],\n      };\n      if (!lastAnimation) {\n        // 第一次，添加初始位置\n\n        // xy 移动\n        danmakuObj.animations.push({\n          type: \"static\",\n          duration: 0,\n          x: x2,\n          y: y2,\n        });\n        // 旋转\n        danmakuObj.animations.push({\n          type: \"rotateX\",\n          duration: 0,\n          angle: {\n            end: rx2,\n          },\n        });\n        danmakuObj.animations.push({\n          type: \"rotateY\",\n          duration: 0,\n          angle: {\n            end: ry2,\n          },\n        });\n        danmakuObj.animations.push({\n          type: \"rotateZ\",\n          duration: 0,\n          angle: {\n            end: rz2,\n          },\n        });\n        // 缩放\n        danmakuObj.animations.push({\n          type: \"scale\",\n          duration: 0,\n          scale: {\n            x2: s2,\n            y2: s2,\n            z2: s2,\n          },\n        });\n      } else {\n        let {\n          x: x1 = 0,\n          y: y1 = 0,\n          duration = 1000,\n          opacity: o1 = 1,\n          rx: rx1 = 0,\n          ry: ry1 = 0,\n          rz: rz1 = 0,\n        } = lastAnimation;\n\n        // 移动\n        danmakuObj.animations.push({\n          type: \"translate\",\n          duration,\n          path: {\n            x2: x2 - x1,\n            y2: y2 - y1,\n          },\n        });\n        // 透明度\n        danmakuObj.animations.push({\n          type: \"opacity\",\n          duration,\n          opacity: [o1, o2],\n        });\n        // 旋转\n        danmakuObj.animations.push({\n          type: \"rotateX\",\n          duration,\n          angle: {\n            end: rx2 - rx1,\n          },\n        });\n        danmakuObj.animations.push({\n          type: \"rotateY\",\n          duration,\n          angle: {\n            end: ry2 - ry1,\n          },\n        });\n        danmakuObj.animations.push({\n          type: \"rotateZ\",\n          duration,\n          angle: {\n            end: rz2 - rz1,\n          },\n        });\n        // 缩放\n        danmakuObj.animations.push({\n          type: \"scale\",\n          duration,\n          scale: {\n            x2: s2,\n            y2: s2,\n            z2: s2,\n          },\n        });\n        console.log(s2);\n      }\n\n      animationsList.push(danmakuObj);\n      lastAnimation = animation;\n    });\n    let { duration = 1000 } = lastAnimation;\n    animationsList.push({\n      type: \"static\",\n      duration,\n    });\n    // console.log(animationsList);\n    return animationsList;\n  }\n}\n","/**\n * 简单渲染器工厂\n */\n\nimport { I18n } from \"../i18n\";\nimport { BaseRenderer } from \"../core/Renderer/BaseRenderer\";\nimport { RendererInterface } from \"../core/Renderer/RendererInterface\";\nimport { CSS3Renderer } from \"../core/Renderer/CSS3Renderer/CSS3Renderer\";\n\nexport class RendererFactory{\n    public static rendererList = {\n        base:BaseRenderer,\n        css3:CSS3Renderer\n    }\n    public static getRenderInstance(type:string):RendererInterface{\n        if (this.rendererList[type]) {\n            return new this.rendererList[type]()\n        }else{\n            throw ReferenceError(I18n.t(\"Renderer type is null\"))\n        }\n    }\n}","import { AdvancedLine } from \"../TimeLine/AdvancedLine\";\nimport { TimeLineInterface } from \"../TimeLine/TimeLineInterface\";\n\nexport class TimeLineFactory{\n    public static list = {\n        \"defult\":AdvancedLine,\n        \"advance\":AdvancedLine\n    }\n    public static getTimeLine(type:string):TimeLineInterface{\n        if(!this.list[type]){\n           type = \"default\"\n        }\n        return new this.list[type]()\n    }\n}","import { DanmakuItemInterface } from \"../core/Danmaku/DanmakuItemInterface\";\nimport { TimeLineDanmaku } from \"./TimeLineDanmaku\";\nimport { TimeLineInterface } from \"./TimeLineInterface\";\n\n/**\n * 高级弹幕时间轴\n */\nexport class AdvancedLine implements TimeLineInterface {\n  /**\n   * 上次获取时间(10ms)\n   */\n  public lastTime: number = 0;\n  /**\n   * 时间轴,二维数组，一维是弹幕的开始10毫秒数，二维是此毫秒数下的弹幕集合\n   * 注意：为了节省性能，最小单位时间是10ms，\n   *       仅仅是数组下标是10ms，其余的都是按照ms计算的\n   */\n  public danmakuList: TimeLineDanmaku[][] = [];\n\n  /**\n   * 添加一个弹幕\n   * @param danmaku\n   * @param start\n   * @param end\n   */\n  public addDanmaku(\n    danmaku: DanmakuItemInterface,\n    start?: number,\n    end?: number\n  ) {\n    start = start || danmaku.startTime();\n\n    end = end || danmaku.getAnimation().getDuration() + start;\n    let index = this.timeToIndex(start);\n\n    if (!this.danmakuList[index]) {\n      this.danmakuList[index] = [];\n    }\n    this.danmakuList[index].push({\n      danmaku: danmaku,\n      start: start,\n      end: end,\n    });\n  }\n  /**\n   * 时间转换\n   * @param time\n   * @returns\n   */\n  protected timeToIndex(time: number): number {\n    return Math.floor(time / 16);\n  }\n  public getDanmakuList(time: number): {\n    skip: boolean;\n    DanmakuList: TimeLineDanmaku[];\n  } {\n    time = this.timeToIndex(time);\n    // 如果请求的时间超过了时间轴。。。\n    if (time < 0) {\n      return { skip: false, DanmakuList: [] };\n    }\n\n    let arr: TimeLineDanmaku[] = [];\n    let skip = false;\n    // 当两次时间超过200ms，表示发生了跳转\n    if (this.lastTime <= time && time - this.lastTime < 5) {\n      // 正常播放情况,遍历期间的所有内容\n      // console.log(this.lastTime);\n\n      for (let a = this.lastTime; a < time; a++) {\n        if (this.danmakuList[a]) {\n          // console.log(time);\n\n          arr.push(...this.danmakuList[a]);\n        }\n      }\n    } else {\n      // 否则说明播放发生了跳转，则遍历找到合适的内容\n      // 查找范围：在当前时间之前开始的，并且结束于当前时间之后的，\n      // 先找到之前开始的\n\n      for (let timeIndex = 0; timeIndex < time; timeIndex++) {\n        if (!this.danmakuList[timeIndex]) {\n          continue; // 当前时间不存在\n        }\n        // 接着再查找当前时间之后结束的\n        for (let l = 0; l < this.danmakuList[timeIndex].length; l++) {\n          if (\n            this.danmakuList[timeIndex][l] &&\n            this.timeToIndex(this.danmakuList[timeIndex][l].end) > time\n          ) {\n            arr.push(this.danmakuList[timeIndex][l]);\n          }\n        }\n      }\n      skip = true;\n    }\n    this.lastTime = time;\n\n    return { skip: skip, DanmakuList: arr };\n  }\n  public reset(): boolean {\n    this.danmakuList = [];\n    return true;\n  }\n}\n","/**\n * 贝塞尔相关工具函数\n */\nexport class Cubic {\n    public px3: number\n    public px2: number\n    public px1: number\n    public py3: number\n    public py2: number\n    public py1: number\n    public epsilon: number\n    constructor (a: number, b: number, c: number, d: number) {\n      this.px3 = 3 * a\n      this.px2 = 3 * (c - a) - this.px3\n      this.px1 = 1 - this.px3 - this.px2\n      this.py3 = 3 * b\n      this.py2 = 3 * (d - b) - this.py3\n      this.py1 = 1 - this.py3 - this.py2\n      this.epsilon = 1e-7      // 目标精度\n    }\n\n    public getX(t: number) {\n      return ((this.px1 * t + this.px2) * t + this.px3) * t\n    }\n\n    public getY(t: number) {\n      return ((this.py1 * t + this.py2) * t + this.py3) * t\n    }\n\n    public solve(x: number) {\n      if (x === 0 || x === 1) {             // 对 0 和 1 两个特殊 t 不做计算\n        return this.getY(x)\n      }\n      let t = x\n      for (let i = 0; i < 8; i++) {         // 进行 8 次迭代\n        let g = this.getX(t) - x\n        if (Math.abs(g) < this.epsilon) {   // 检测误差到可以接受的范围\n          return this.getY(t)\n        }\n        let d = (3 * this.px1 * t + 2 * this.px2) * t + this.px3   // 对 x 求导\n        if (Math.abs(d) < 1e-6) {           // 如果梯度过低，说明牛顿迭代法无法达到更高精度\n          break\n        }\n        t = t - g / d\n      }\n      return this.getY(t)                   // 对得到的近似 t 求 y\n    }\n  }\n","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"./AnimationInterface\";\nimport { Cubic } from \"./Cubic\";\n\n/**\n * 贝塞尔动画类\n */\nexport abstract class CubicAnimations implements AnimationInterface {\n  /**\n   * 贝塞尔函数\n   */\n  public cubicFunc: Cubic;\n  /**\n   * 贝塞尔参数\n   */\n  public cubic: [number, number, number, number] = [0, 0, 1, 1];\n  /**\n   * 动画总时间\n   */\n  public duration: number = 1000;\n  // currentTime:number = 0\n  public getMatrix(time: number): false | number[] {\n    if (this.isEnd(time)) {\n      return false;\n    }\n    let p = this.getProgress(time);\n    let a = this.getMatrixForCubic(p, this.duration * p);\n    return a;\n  }\n  public getStyle(time: number): false | DanmakuStyle {\n    if (this.isEnd(time)) {\n      return false;\n    }\n    let p = this.getProgress(time);\n    return this.getCubicStyle(p, this.duration * p);\n  }\n  public setParams(param?: { [idx: string]: any }): boolean {\n    this.cubic = param?.cubic ? param?.cubic : this.cubic;\n    this.duration =\n      param?.duration !== undefined ? param?.duration : this.duration;\n    return true;\n  }\n  public getDuration(): number {\n    return this.duration;\n  }\n  /**\n   * 根据动画时间获取动画进度\n   * @param time 动画时间\n   * @returns\n   */\n  public getProgress(time: number): number {\n    // 不能除0\n    if (this.duration === 0) {\n      return 1;\n    }\n    // 计算当前动画进度\n    let progress: number = time / this.duration;\n    // 计算出实际动画进度\n    let a = this.getCubic().solve(progress);\n    return a;\n  }\n  /**\n   * 根据进度返回区间内的值\n   * @param start\n   * @param end\n   * @param progress\n   */\n  public getProgressValue(\n    start: number,\n    end: number,\n    progress: number\n  ): number {\n    return start + (end - start) * progress;\n  }\n  /**\n   * 判断动画是否结束\n   */\n  protected isEnd(time: number) {\n    return time > this.duration;\n  }\n  /**\n   * 获取贝塞尔函数\n   * @returns\n   */\n  public getCubic(): Cubic {\n    if (!this.cubicFunc) {\n      this.cubicFunc = new Cubic(...this.cubic);\n    }\n    return this.cubicFunc;\n  }\n  /**\n   * 计算贝塞尔样式\n   * 注意：此处返回false仅表示未设置动画，请不要在此函数实现中判断动画结束\n   * @param progress 动画进度，0-1 有可能会超过此范围\n   */\n  public abstract getCubicStyle(\n    progress: number,\n    time: number\n  ): DanmakuStyle | false;\n  /**\n   * 计算贝塞尔的矩阵\n   * 注意：此处返回false仅表示未设置动画，请不要在此函数实现中判断动画结束\n   * @param progress 动画进度，0-1 有可能会超过此范围\n   * @\n   */\n  public abstract getMatrixForCubic(\n    progress: number,\n    time: number\n  ): number[] | false;\n}\n","/**\n * 矩阵变换相关工具函数\n */\nexport class Matrix {\n    /**\n     * 加法\n     * @param a \n     * @param b \n     */\n    public static add(a: number[], b: number[]): number[] {\n        let c: number[] = []\n        for (let i = 0; i < a.length; i++) {\n            c[i] = a[i] + b[i]\n        }\n        return c\n    }\n    /**\n     * 减法\n     * @param a \n     * @param b \n     * @returns \n     */\n    public static sub(a: number[], b: number[]): number[] {\n        let c: number[] = []\n        for (let i = 0; i < a.length; i++) {\n            c[i] = a[i] - b[i]\n        }\n        return c\n    }\n    public static mult(a: number[], b: number[]): number[] {\n        let a1 = this.tran(a);\n        let b1 = this.tran(b);\n         // 相乘约束\n        if (a1[0].length !== b1.length) {\n            throw new Error();\n        }\n        let m = a1.length;\n        let p = a1[0].length;\n        let n = b1[0].length;\n\n        // 初始化 m*n 全 0 二维数组\n        let c = new Array(m).fill(0).map(()=> new Array(n).fill(0));\n\n        for (let i = 0; i < m; i++) {\n            for (let j = 0; j < n; j++) {\n                for (let k = 0; k < p; k++) {\n                    c[i][j] += a1[i][k] * b1[k][j];\n                }\n            }\n        }\n\n        return [...c[0],...c[1],...c[2],...c[3]];\n    }\n    /**\n     * 将一维16位数组转换成4*4二维数组\n     * @param a \n     */\n    protected static tran(a: number[]):number[][] {\n        let arr: number[][] = []\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                let index = i * 4 + j\n                if(!arr[i]) { arr[i] = []; }\n                arr[i][j] = a[index];\n            }\n        }\n        return arr;\n    }\n    /**\n     * 获得一个无效果的4x4矩阵\n     */\n    public static getNullMatrix():number[]{\n        return [\n            1,0,0,0,\n            0,1,0,0,\n            0,0,1,0,\n            0,0,0,1\n        ]\n    }\n}","import { CubicAnimations } from \"./CubicAnimations\";\nimport { Matrix } from \"./Matrix\";\n\n/**\n * 可改变动画中心点的动画\n *\n * @export\n * @abstract\n * @class OriginAnimations\n * @extends {CubicAnimations}\n */\nexport abstract class OriginAnimations extends CubicAnimations {\n    public origin:number[] = [0,0,0]\n    public setParams(param: { [idx: string]: any; }): boolean {\n        if (!super.setParams(param)) { return false; }\n        this.origin =  param?.origin || this.origin\n        return true\n    }\n    public getMatrixForCubic(progress: number): number[] | false{\n        let arr = this.getMatrixForOrigin(progress)\n        if(!arr) { return false }\n        arr = Matrix.mult([\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            -this.origin[0], -this.origin[1], -this.origin[2], 1\n\n        ],                arr)\n        return Matrix.mult(arr,[\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            this.origin[0], this.origin[1], this.origin[2], 1\n\n        ])\n    }\n    /**\n     * 获取用于计算原坐标点的矩阵\n     * @param progress \n     */\n    public abstract getMatrixForOrigin(progress: number): number[] | false\n}","import { deepMerge } from \"../../../util/deepMerge\";\nimport { AnimationFactory } from \"../../../Factory/AnimationFactory\";\nimport { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"../Base/AnimationInterface\";\nimport { CubicAnimations } from \"../Base/CubicAnimations\";\nimport { Matrix } from \"../Base/Matrix\";\n\n/**\n * 动画组，用于多个动画并行播放\n */\nexport class GroupAnimations extends CubicAnimations {\n  public animations: AnimationInterface[] = [];\n  /**\n   * 每个动画结束的累计矩阵\n   */\n  public cumulativeMatrix: number[][] = [];\n  public duration: number = 0;\n  public setParams(param: { [idx: string]: any }): boolean {\n    super.setParams(param);\n\n    this.animations = AnimationFactory.getAnimationsList(\n      param?.animations || []\n    );\n    // 计算出最大的动画时长\n    this.animations.forEach((val, key) => {\n      let dur = val.getDuration();\n      // 计算最后一帧\n      this.cumulativeMatrix[key] = val.getMatrix(dur) || Matrix.getNullMatrix();\n      if (dur > this.duration) {\n        // 这里覆盖了父类的属性\n        // 实际上，只有父类的时长不够，才会被更新\n        this.duration = val.getDuration();\n      }\n    });\n\n    return true;\n  }\n  public getCubicStyle(_progress: number, time: number): false | DanmakuStyle {\n    /**\n     * 合并样式，由于样式的特殊性，如果存在冲突的样式，后面的会覆盖前面的\n     */\n    let style: DanmakuStyle = { boxStyle: {}, fontStyle: {} };\n    let noneStyle = true;\n    for (const animation of this.animations) {\n      let style2 = animation.getStyle(time);\n\n      if (style2) {\n        noneStyle = false;\n        style = deepMerge(style, style2);\n      }\n    }\n    // for(let i = 0;i<this.animations.length;i++){\n    //     let style2 = this.animations[i].getStyle(time)\n    //     if(style2){\n    //         noneStyle = false;\n    //         style = dseepMerge(style,style2);\n    //     }\n\n    // }\n    if (noneStyle) {\n      return false;\n    }\n    return style;\n  }\n  public getMatrixForCubic(_progress: number, time: number): false | number[] {\n    // 建立一个空白矩阵\n    let arr: number[] = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    // 倒着计算所有的矩阵\n    for (let i = this.animations.length - 1; i >= 0; i--) {\n      let matrix = this.animations[i].getMatrix(time);\n      // console.log(matrix);\n\n      if (matrix) {\n        arr = Matrix.mult(arr, matrix);\n      } else {\n        arr = Matrix.mult(arr, this.cumulativeMatrix[i]);\n      }\n    }\n\n    return arr;\n  }\n}\n","import { AnimationFactory } from \"../../../Factory/AnimationFactory\";\nimport { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"../Base/AnimationInterface\";\nimport { CubicAnimations } from \"../Base/CubicAnimations\";\nimport { Matrix } from \"../Base/Matrix\";\n/**\n * 动画列表组，所有动画按顺序播放\n */\nexport class ListAnimations extends CubicAnimations {\n  public animations: AnimationInterface[] = [];\n  /**\n   * 每个动画结束的累计矩阵\n   */\n  public cumulativeMatrix: number[][] = [];\n  public cumulativeTime: number[] = [];\n  public duration: number = 0;\n  public setParams(param: { [idx: string]: any }): boolean {\n    super.setParams(param);\n    this.animations = AnimationFactory.getAnimationsList(\n      param?.animations || []\n    );\n\n    let duration = 0;\n    this.cumulativeMatrix[0] = Matrix.getNullMatrix();\n    this.cumulativeTime[0] = duration;\n\n    this.animations.forEach((val, key) => {\n      let dur = val.getDuration();\n\n      // 自增1，因为0的结束帧的1的开头\n      key++;\n      // 计算出每个动画结束后的矩阵叠加,传入持续时间以获得最后一帧动画\n      let matrix = val.getMatrix(dur) || Matrix.getNullMatrix();\n      // 叠加\n      this.cumulativeMatrix[key] = Matrix.mult(\n        matrix,\n        this.cumulativeMatrix[key - 1]\n      );\n\n      duration += dur;\n      this.cumulativeTime[key] = duration;\n    });\n\n    if (this.duration < duration) {\n      this.duration = duration;\n    }\n\n    return true;\n  }\n\n  public getCubicStyle(_progress: number, time: number): false | DanmakuStyle {\n    let curAnimation = this.getCurAnimation(time);\n\n    if (curAnimation) {\n      time = time - this.cumulativeTime[curAnimation.key];\n      return curAnimation.animation.getStyle(time);\n    }\n    return false;\n  }\n\n  public getMatrixForCubic(_progress: number, time: number): false | number[] {\n    let curAnimation = this.getCurAnimation(time);\n\n    if (curAnimation) {\n      time = time - this.cumulativeTime[curAnimation.key];\n\n      let mat =\n        curAnimation.animation.getMatrix(time) || Matrix.getNullMatrix();\n      return Matrix.mult(mat, this.cumulativeMatrix[curAnimation.key]);\n    }\n    return false;\n  }\n  /**\n   * 获取当前的动画元素,如果不存在则返回false\n   */\n  protected getCurAnimation(\n    time: number\n  ): { key: number; animation: AnimationInterface } | false {\n    for (let i = this.animations.length - 1; i >= 0; i--) {\n      let duration = this.cumulativeTime[i];\n      if (time > duration) {\n        return { key: i, animation: this.animations[i] };\n      }\n    }\n    return false;\n  }\n}\n","import { AnimationFactory } from \"../../../Factory/AnimationFactory\";\nimport { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"../Base/AnimationInterface\";\nimport { CubicAnimations } from \"../Base/CubicAnimations\";\nimport { StaticAnimation } from \"../TransformsAnimations/StaticAnimation\";\n\nexport class RepeatAnimations extends CubicAnimations {\n  /**\n   * 动画接口\n   */\n  public animation: AnimationInterface;\n  /**\n   * 重复次数\n   */\n  public repeat: number = 1;\n  /**\n   * 单个动画时间\n   */\n  public animationTime: number;\n  public duration: number = 0;\n  public getCubicStyle(_progress: number, time: number): false | DanmakuStyle {\n    return this.animation.getStyle(this.getCurTime(time));\n  }\n  public getMatrixForCubic(_progress: number, time: number): false | number[] {\n    return this.animation.getMatrix(this.getCurTime(time));\n  }\n  public setParams(param: { [idx: string]: any }): boolean {\n    super.setParams(param);\n\n    if (param?.animations) {\n      let animation = AnimationFactory.getAnimations(\"list\", {\n        animations: param?.animations,\n      });\n      if (animation) {\n        this.animation = animation;\n      } else {\n        this.animation = new StaticAnimation();\n      }\n      //   // 将列表组成一个list\n      //   this.animation =\n      //     AnimationFactory.getAnimations(\n      //       param?.animation.type,\n      //       param?.animations\n      //     ) || new StaticAnimation();\n    } else {\n      this.animation = new StaticAnimation();\n    }\n\n    // console.log(this.animation);\n\n    this.repeat = param?.repeat || this.repeat;\n    this.animationTime = this.animation.getDuration();\n    // 覆盖父级存活时间\n    // 计算方式 单个弹幕时间 X 弹幕重复次数\n    this.duration = this.animationTime * this.repeat;\n    // console.log(this.duration);\n\n    return true;\n  }\n  /**\n   * 获得当前的弹幕时间\n   */\n  public getCurTime(time: number) {\n    // 取余\n    return time % this.animationTime;\n  }\n}\n","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { OriginAnimations } from \"../Base/OriginAnimations\";\n\n/**\n * 旋转父类\n */\nexport abstract class RotationAnimation extends OriginAnimations {\n\n    public angle:{start:number,end:number} = {start:0,end:360}\n    public setParams(param: { [idx: string]: any; }): boolean {\n        if (!super.setParams(param)) { return false; }\n        this.angle = Object.assign(this.angle,param?.angle)\n        return true\n    }\n    public getCubicStyle(_progress: number): false | DanmakuStyle {\n        return false;\n    }\n    /**\n     * 角度转弧度\n     */\n    protected A2R(a: number) {\n        return a * (Math.PI / 180)\n    }\n}","import { RotationAnimation } from \"./RotationAnimation\";\n\n/**\n * X轴旋转\n */\nexport class RotationXAnimation extends RotationAnimation {\n  public getMatrixForOrigin(progress: number): false | number[] {\n    let angle = this.getProgressValue(\n      this.angle.start,\n      this.angle.end,\n      progress\n    );\n    let sin = Math.sin(this.A2R(angle));\n    let cos = Math.cos(this.A2R(angle));\n\n    return [1, 0, 0, 0, 0, cos, sin, 0, 0, -sin, cos, 0, 0, 0, 0, 1];\n  }\n}\n","import { RotationAnimation } from \"./RotationAnimation\";\n/**\n * y轴旋转\n */\nexport class RotationYAnimation extends RotationAnimation {\n    public getMatrixForOrigin(progress: number): false | number[] {\n        let angle = this.getProgressValue(this.angle.start,this.angle.end,progress)\n        let sin = Math.sin(this.A2R(angle));\n        let cos = Math.cos(this.A2R(angle))\n        return [\n            cos, 0, sin, 0,\n            0, 1, 0, 0,\n            -sin, 0, cos, 0,\n            0, 0, 0, 1\n        ]\n    }\n}","import { RotationAnimation } from \"./RotationAnimation\";\n\n/**\n * z轴旋转\n */\nexport class RotationZAnimation extends RotationAnimation {\n    public getMatrixForOrigin(progress: number): false | number[] {\n        let angle = this.getProgressValue(this.angle.start,this.angle.end,progress)\n        let sin = Math.sin(this.A2R(angle));\n        let cos = Math.cos(this.A2R(angle))\n        return [\n            cos,sin, 0, 0,\n            -sin, cos, 0, 0,\n            0, 0,1, 0,\n            0, 0, 0, 1\n        ]\n    }\n}","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { OriginAnimations } from \"../Base/OriginAnimations\";\n\n/**\n * 缩放动画\n */\nexport class ScaleAnimations extends OriginAnimations{\n    public scale:{x1:number,y1:number,z1:number,x2:number,y2:number,z2:number}\n    = {x1:1,y1:1,z1:1,x2:1,y2:1,z2:1}\n    public setParams(param: { [idx: string]: any; }): boolean {\n        if (!super.setParams(param)) { return false; }\n        this.scale = Object.assign(this.scale,param?.scale)\n        return true\n    }\n    public getMatrixForOrigin(progress: number): false | number[] {\n        let x = this.getProgressValue(this.scale.x1, this.scale.x2, progress);\n        let y = this.getProgressValue(this.scale.y1, this.scale.y2, progress)\n        let z = this.getProgressValue(this.scale.z1, this.scale.z2, progress)\n        let m = [\n            x,0,0,0,\n            0,y,0,0,\n            0,0,z,0,\n            0,0,0,1\n        ]\n        return m\n\n    }\n    public getCubicStyle(_progress: number): false | DanmakuStyle {\n       return false\n    }\n\n}","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"../Base/AnimationInterface\";\n\n/**\n * 静止动画 仅仅悬停在某一个位置一定时间\n */\nexport class StaticAnimation implements AnimationInterface {\n  public getDuration(): number {\n    return this.duration;\n  }\n\n  public duration: number = 1000;\n  public x: number = 0;\n  public y: number = 0;\n  public z: number = 0;\n  public setParams(param: { [idx: string]: any }): boolean {\n    let def = 0;\n    this.duration =\n      param?.duration !== undefined ? param?.duration : this.duration;\n    this.x = param?.x || def;\n    this.y = param?.y || def;\n    this.z = param?.z || def;\n    return true;\n  }\n  public getMatrix(time: number): false | number[] {\n    // console.log(time);\n\n    if (time > this.duration) {\n      return false;\n    }\n\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, this.x, this.y, this.z, 1];\n  }\n  public getStyle(): false | DanmakuStyle {\n    return false;\n  }\n}\n","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { CubicAnimations } from \"../Base/CubicAnimations\";\n\nexport class TranslateAnimation extends CubicAnimations {\n\n    public path: { x1: number, y1: number, z1: number, x2: number, y2: number, z2: number }\n        =\n        { x1: 0, y1: 0, x2: 0, y2: 0, z1: 0, z2: 0 }\n    public setParams(param: { [idx: string]: any; }): boolean {\n        if (!super.setParams(param)) { return false; }\n        this.path = Object.assign(this.path,param?.path)\n        return true\n    }\n    public getCubicStyle(): false | DanmakuStyle {\n        return false;\n    }\n    public getMatrixForCubic(progress: number): false | number[] {\n        // console.log(this.path);\n        // console.log(progress);\n\n        let x = this.getProgressValue(this.path.x1, this.path.x2, progress);\n        let y = this.getProgressValue(this.path.y1, this.path.y2, progress)\n        let z = this.getProgressValue(this.path.z1, this.path.z2, progress)\n\n        return [\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            x, y, z, 1\n        ]\n    }\n}","import { DanmakuStyle } from \"../../Style/DanmakuStyle\";\nimport { CubicAnimations } from \"../Base/CubicAnimations\";\n\n/**\n * 透明度动画\n *\n * @export\n * @class OpacityAnimations\n * @extends {CubicAnimations}\n */\nexport class OpacityAnimations extends CubicAnimations {\n  public opacity: [number, number] = [0, 1];\n  public setParams(param?: { [idx: string]: any }): boolean {\n    super.setParams(param);\n    this.opacity = param?.opacity || this.opacity;\n    // console.log(param);\n    return true;\n  }\n  public getCubicStyle(progress: number, _time: number): false | DanmakuStyle {\n    return {\n      opacity: this.getProgressValue(\n        this.opacity[0],\n        this.opacity[1],\n        progress\n      ),\n    };\n  }\n  public getMatrixForCubic(_progress: number, _time: number): false | number[] {\n    return false;\n  }\n}\n","import { DanmakuStyle } from \"../Style/DanmakuStyle\";\nimport { AnimationInterface } from \"../Animation/Base/AnimationInterface\";\nimport { DanmakuItemInterface } from \"./DanmakuItemInterface\";\nimport { StaticAnimation } from \"../Animation/TransformsAnimations/StaticAnimation\";\n\n/**\n * 基础弹幕类型\n */\nexport class BaseDanmaku implements DanmakuItemInterface {\n  public style: DanmakuStyle = {};\n  public start: number = 0;\n  public animation?: AnimationInterface;\n  public content: string = \"\";\n  public child: DanmakuItemInterface[] = [];\n  /**\n   * 设置参数\n   * @param param\n   * @returns\n   */\n  public setParams(param: { [idx: string]: any }): boolean {\n    // 设置文字样式\n    try {\n      // 设置开始时间\n      if (param?.start) {\n        this.start = param?.start;\n      }\n      if (param?.animation) {\n        this.animation = param?.animation || new StaticAnimation();}\n      if (param?.child) { this.child = param.child; }\n      if (param?.style) { this.style = param?.style; }\n      if (param?.content) { this.content = param?.content;}\n    } catch (e) {\n      console.warn(e);\n      return false;\n    }\n\n    return true;\n  }\n  public getType(): string {\n    return \"base\";\n  }\n  public getContent(): string {\n    return this.content;\n  }\n  public getChild(): DanmakuItemInterface[] {\n    return this.child;\n  }\n  public getAnimation(): AnimationInterface {\n    if (!this.animation) {\n      this.animation = new StaticAnimation();\n    }\n    return this.animation;\n  }\n  public getStyle(): DanmakuStyle {\n    return this.style;\n  }\n  public startTime(): number {\n    return this.start;\n  }\n}\n","\n\nimport { DanmakuItemInterface } from \"../Danmaku/DanmakuItemInterface\";\nimport { CanvasStyle } from \"../Style/CanvasStyle\";\nimport { RendererInterface } from \"./RendererInterface\";\n\nexport class BaseRenderer implements RendererInterface {\n    public reset(): boolean {\n        throw new Error(\"Method not implemented.\");\n    }\n    public addDanmaku(_danmaku: DanmakuItemInterface): boolean {\n        return false;\n    }\n    public refresh(): boolean {\n        return false\n    }\n    protected canvas?: HTMLElement\n    public setCanvasContainer(canvas: HTMLElement): boolean {\n        this.canvas = canvas\n        return true\n    }\n    public updateCanvasStyle(style: CanvasStyle): boolean {\n        if (this.canvas) {\n            this.canvas.style.width = style.size.width.string();\n            this.canvas.style.height = style.size.height.string();\n            this.canvas.style.left = style.position.x.string()\n            this.canvas.style.top = style.position.y.string()\n            this.canvas.style.backgroundColor = style.color.string()\n            return true\n        } else {\n            return false\n        }\n    }\n}","import { UnitTools } from \"../../../util/UnitTools\";\nimport { DanmakuItemInterface } from \"../../Danmaku/DanmakuItemInterface\";\nimport { CanvasStyle } from \"../../Style/CanvasStyle\";\nimport { SizeInterface } from \"../../Style/SizeInterface\";\nimport { PxSize } from \"../../Style/Unit/PxSize\";\nimport { RendererInterface } from \"../RendererInterface\";\nimport { DanmakuObj, DanmakuTool } from \"./CssDanmakuObj\";\n\n\nexport class CSS3Renderer implements RendererInterface {\n\n    public canvasSize: SizeInterface = {\n        width: new PxSize(1920),\n        height: new PxSize(1080)\n    }\n    public canvas?: HTMLElement\n    public danmakuList: DanmakuObj[] = []\n    public setCanvasContainer(canvas: HTMLElement): boolean {\n        this.canvas = canvas\n        return true;\n    }\n    public updateCanvasStyle(style: CanvasStyle): boolean {\n        if (this.canvas) {\n            this.canvas.style.width = this.canvasSize.width.string();\n            this.canvas.style.height =this.canvasSize.height.string();\n            this.canvas.style.left = UnitTools.lengthSrting((style.size.width.length - this.canvasSize.width.length) / 2)\n            this.canvas.style.top = UnitTools.lengthSrting((style.size.height.length - this.canvasSize.height.length) / 2)\n            this.canvas.style.backgroundColor = style.color.string()\n            let r: number;// 缩放大小\n            if (style.size.width.length / style.size.height.length >= this.canvasSize.width.length / this.canvasSize.height.length) {\n                // 横向\n                r = style.size.height.length / this.canvasSize.height.length\n            } else {\n                // 纵向\n                r = style.size.width.length / this.canvasSize.width.length\n            }\n            this.canvas.style.transform = `scale(${r},${r})`\n\n            return true\n        } else {\n            return false\n        }\n    }\n    public addDanmaku(danmaku: DanmakuItemInterface): boolean {\n        if(!this.canvas) { return false }\n        let danmakuobj = DanmakuTool.recursionDanmaku([danmaku])\n        let eles = DanmakuTool.recursionDiv(danmakuobj)\n        eles.forEach((ele) => {\n            this.canvas?.appendChild(ele)\n        })\n        this.danmakuList.push(...danmakuobj);\n        // console.log(danmakuobj);\n\n        return true;\n    }\n\n\n\n    public refresh(time): boolean {\n        if (!this.canvas) {\n            return false;\n        }\n    \n        DanmakuTool.recursionStyle(this.danmakuList,this.canvas,time)\n        return true;\n    }\n    public reset(): boolean {\n        // 清空画布\n\n        if(this.canvas){\n            this.canvas.innerHTML = \"\";\n        }\n        // 清空数组\n        this.danmakuList = []\n        return true\n\n    }\n}\n","import { UnitTools } from \"../../../util/UnitTools\";\nimport { AnimationInterface } from \"../../Animation/Base/AnimationInterface\";\nimport { DanmakuItemInterface } from \"../../Danmaku/DanmakuItemInterface\";\nimport { DanmakuStyle } from \"../../Style/DanmakuStyle\";\n\nexport interface DanmakuObj {\n  element: HTMLElement;\n  style: DanmakuStyle;\n  animation: AnimationInterface;\n  child: DanmakuObj[];\n  start: number;\n}\nexport class DanmakuTool {\n  /**\n   * 递归构建弹幕对象\n   * @param danmaku\n   * @returns\n   */\n  public static recursionDanmaku(\n    danmaku: DanmakuItemInterface[]\n  ): DanmakuObj[] {\n    let danmakuobj: DanmakuObj[] = [];\n    danmaku.forEach((danmaku) => {\n      let div = this.createDiv(danmaku.getContent());\n      this.setStyle(div, danmaku.getStyle());\n      let obj: DanmakuObj = {\n        element: div,\n        animation: danmaku.getAnimation(),\n        style: danmaku.getStyle(),\n        child: [],\n        start: danmaku.startTime(),\n      };\n      let child = danmaku.getChild();\n      let childObj;\n      if (child) {\n        childObj = this.recursionDanmaku(child);\n      }\n\n      obj.child = childObj;\n      danmakuobj.push(obj);\n    });\n    return danmakuobj;\n  }\n  /**\n   * 创建一个空div\n   * @param content\n   * @returns\n   */\n  public static createDiv(content: string): HTMLElement {\n    let div = document.createElement(\"div\");\n    div.style.position = \"absolute\";\n    div.innerText = content;\n    return div;\n  }\n\n  /**\n   * 递归构建element\n   * @param danmakuobj\n   * @returns\n   */\n  public static recursionDiv(danmakuobj: DanmakuObj[]): HTMLElement[] {\n    let array: HTMLElement[] = [];\n    danmakuobj.forEach((item) => {\n      let element = item.element;\n      if (item.child) {\n        let eles = this.recursionDiv(item.child);\n        eles.forEach((ele) => {\n          element.appendChild(ele);\n        });\n      }\n      array.push(element);\n    });\n    return array;\n  }\n  /**\n   * 将样式设置到元素中\n   */\n  public static setStyle(element: HTMLElement, style: { [idx: string]: any }) {\n    Object.assign(element.style, style);\n  }\n  /**\n   * 递归设置弹幕动画\n   * @param danmaku\n   */\n  public static recursionStyle(\n    danmaku: DanmakuObj[],\n    canvas: HTMLElement,\n    abstime: number,\n    parentTime: number = 0\n  ) {\n    //console.log(danmaku);\n    danmaku.forEach((dan, key) => {\n      // 更新弹幕样式\n      let time =\n        parentTime === 0 ? abstime - dan.start : parentTime - dan.start;\n\n      // console.log(dan.animation);\n\n      let sty;\n      let max;\n      sty = dan.animation.getStyle(time);\n      // console.log(sty);\n      if (sty) {\n        this.setStyle(dan.element, sty);\n      }\n      max = dan.animation.getMatrix(time);\n      if (max) {\n        dan.element.style.transform = UnitTools.Matrix3dString(max);\n      }\n      //console.log(dan);\n      // 如果都不存在，则表示动画已经完成，销毁元素\n      // 如果是子元素的情况，有可能存在弹幕未开始的情况\n      if (!(sty || max)) {\n        //console.log(dan);\n        if (dan.element.parentElement) {\n          // 从父元素删除节点\n          dan.element.parentElement.removeChild(dan.element);\n        } else {\n          // 否则从canvas里面删除\n          canvas.removeChild(dan.element);\n        }\n        // 并且清空节点\n        delete danmaku[key];\n      }\n      // 递归\n      this.recursionStyle(dan.child, canvas, abstime, time);\n    });\n  }\n}\n","import { RendererInterface } from \"../Renderer/RendererInterface\";\nimport { Color } from \"../Style/Unit/Color\";\nimport { PositionInterface } from \"../Style/PositionInterface\";\nimport { SizeInterface } from \"../Style/SizeInterface\";\nimport { StageInterface } from \"./StageInterface\";\nimport { PxSize } from \"../Style/Unit/PxSize\";\nimport { TimeLineInterface } from \"../../TimeLine/TimeLineInterface\";\nimport { I18n } from \"../../i18n\";\nimport { TimeLineDanmaku } from \"../../TimeLine/TimeLineDanmaku\";\n\nexport abstract class BaseStage implements StageInterface {\n  protected renderer?: RendererInterface;\n  protected timeLineObj?: TimeLineInterface;\n  public stageSize(containersSize: SizeInterface): SizeInterface {\n    return {\n      width: containersSize.width,\n      height: containersSize.height,\n    };\n  }\n  public stagePosition(): PositionInterface {\n    return {\n      x: new PxSize(0),\n      y: new PxSize(0),\n    };\n  }\n  public stageBackgroundColor(): Color {\n    return new Color(0, 0, 0, 0);\n  }\n  public stageRenderer(render: RendererInterface): boolean {\n    this.renderer = render;\n    return true;\n  }\n  public getRenderer(): RendererInterface {\n    if (this.renderer) {\n      return this.renderer;\n    } else {\n      throw ReferenceError(I18n.t(\"renderer is null\"));\n    }\n  }\n  public timeLine(timeLine: TimeLineInterface): boolean {\n    this.timeLineObj = timeLine;\n    return true;\n  }\n  public refresh(time: number): boolean {\n    if (!this.renderer) {\n      return false;\n    }\n    // console.log(time);\n\n    let list: { skip: boolean; DanmakuList: TimeLineDanmaku[] };\n    list = this.timeLineObj?.getDanmakuList(time) || {\n      skip: false,\n      DanmakuList: [],\n    };\n    if (list) {\n      if (list.skip) {\n        this.renderer?.reset();\n      }\n\n      list.DanmakuList.forEach((val) => {\n        this.renderer?.addDanmaku(val.danmaku);\n      });\n    }\n    this.renderer.refresh(time);\n    return true;\n  }\n  public abstract rendererType(): string;\n  public abstract attachedType(): string;\n  public abstract timeLineType(): string;\n  public reset(): boolean {\n    this?.renderer?.reset();\n    return true;\n  }\n  public getTimeLine(): TimeLineInterface {\n    if (!this.timeLineObj) {\n      throw ReferenceError(I18n.t(\"Time line is null\"));\n    }\n    return this.timeLineObj;\n  }\n}\n","import { BaseStage } from \"./BaseStage\";\n\n/**\n * 代码弹幕舞台\n */\nexport class CodeDanmakuStage extends BaseStage {\n  public timeLineType(): string {\n    return \"advance\";\n  }\n  public rendererType(): string {\n    return \"css3\";\n  }\n  public attachedType(): string {\n    return \"code\";\n  }\n}\n","import { BaseStage } from \"./BaseStage\";\n\n/**\n * model7 弹幕舞台\n */\nexport class Model7Stage extends BaseStage {\n  public rendererType(): string {\n    return \"css3\";\n  }\n  public attachedType(): string {\n    return \"model7\";\n  }\n  public timeLineType(): string {\n    return \"advance\";\n  }\n}\n","import { UnitInterface } from \"./UnitInterface\"\n\n/**\n * 颜色接口\n */\n\nexport class Color implements UnitInterface {\n    public r: number\n    public g: number\n    public b: number\n    public a: number\n    constructor(r:number, g:number, b:number, a:number) {\n        this.r = r\n        this.g = g\n        this.b = b\n        this.a = a\n    }\n    public string(): string {\n        return \"rgba(\" + this.r + \",\" + this.g + \",\" + this.b + \",\" + this.a + \")\"\n    }\n    /**\n     * 常见颜色表\n     */\n    protected static color:{[key:string]:[number,number,number,number]} = {\n        \"black\":[0,0,0,1],\n        \"white\":[255,255,255,1],\n        \"red\":[255,0,0,1],\n        \"green\":[0,255,0,1],\n        \"blue\":[0,0,255,1],\n        \"pink\":[255,105,108,1],\n        \"yellow\":[255,255,0,1],\n        \"grey\":[130,130,130,1]\n    }\n    /**\n     * 获取预设颜色\n     * @param color 颜色名称\n     * @returns \n     */\n    public static getColor(color:string):Color{\n        if(this.color[color]){\n            return new this(...this.color[color])\n        }else{\n            return new this(...this.color[\"black\"])\n        }\n\n    }\n}","import { UnitInterface } from \"./UnitInterface\";\n\nexport class PxSize implements UnitInterface{\n    public length:number\n    constructor(length:number){\n        this.length = length;\n    }\n    public string(): string {\n        return this.length +\"px\";\n    }\n\n}","import { Context } from \"../Context/Context\";\nimport zhCn from \"./zh-cn\";\n/**\n * i18n 国际化函数\n */\nexport class I18n {\n    private static tranTxt = {\n        \"zh-cn\": zhCn\n    }\n    /**\n     * 当前语言\n     */\n    private static language: string = Context.language;\n    /**\n     * 获取翻译，如果不存在，则返回自身\n     * @param str 需要国际化的字符串\n     * @returns 翻译结果\n     */\n    public static t(str: string): string {\n        // 检查字符串是否存在\n        if (this.tranTxt[this.language] && this.tranTxt[this.language][str]) {\n            return this.tranTxt[this.language][str];\n        }\n        return str;\n    }\n}","export default {\n    \"Containers is null\" : \"容器为空\",\n    \"Start mount stage\" : \"开始挂载舞台\",\n    \"Renderer type is null\": \"没有找到合适的渲染器\",\n    \"matrix3d param less than 16\":\"matrix3d 参数小于16个\",\n    \"Unknown danmaku format\":\"未知的弹幕格式\",\n    \"Danmaku parser fail\":\"高级弹幕解析失败，json格式可能存在问题\"\n}","import { I18n } from \"../i18n\";\n\nexport class UnitTools{\n    /**\n     * 拼接带单位的长度字符串\n     * @param num 长度\n     * @returns \n     */\n    public static lengthSrting(num:number):string{\n        return `${num}px`;\n    }\n    /**\n     * 拼接 Matrix3d() 字符串\n     * @param arr 16位数字\n     */\n    public static Matrix3dString(arr:number[]):string{\n        if(arr.length !== 16){\n            throw SyntaxError(I18n.t(\"matrix3d param less than 16\"));\n        }\n        return \"Matrix3d(\" + arr.join(\",\") + \")\";\n    }\n    // static UnitFactory(type:string,obj):string{\n\n    // }\n}","/**\n * 对象深度合并\n * @param obj1\n * @param obj2\n * @returns\n */\nexport function deepMerge(obj1, obj2) {\n  let key;\n  // tslint:disable-next-line: forin\n  for (key in obj2) {\n    obj1[key] =\n      obj1[key] &&\n      obj1[key].toString() === \"[object Object]\" &&\n      obj2[key] &&\n      obj2[key].toString() === \"[object Object]\"\n        ? deepMerge(obj1[key], obj2[key])\n        : (obj1[key] = obj2[key]);\n  }\n  return obj1;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import \"../css/base.css\";\nimport { Controller } from \"./Controller/Controller\";\nimport { I18n } from \"./i18n\";\nimport { InitConfigInterface } from \"./InitConfigInterface\";\nimport { DanmakuEvent } from \"./Event/DanmakuEvent\";\nimport { DanmakuEventType } from \"./Event/DanmakuEventType\";\nimport { CodeDanmakuStage } from \"./core/Stage/CodeDanmakuStage\";\nimport { Model7Stage } from \"./core/Stage/Model7Stage\";\nexport class MFADE {\n  public controller: Controller;\n  constructor(config: InitConfigInterface) {\n    // 类型检查\n    if (!config.containers) {\n      throw ReferenceError(I18n.t(\"Containers is null\"));\n    }\n    this.controller = new Controller(config.containers);\n    // json代码弹幕\n    if (config.codeDanmaku) {\n      this.controller.addGetDanmakuFunction(\"code\", config.codeDanmaku);\n      this.controller.registStage(new CodeDanmakuStage(), 1);\n    }\n\n    // model7 弹幕\n    if (config.model7Danmaku) {\n      this.controller.addGetDanmakuFunction(\"model7\", config.model7Danmaku);\n      this.controller.registStage(new Model7Stage(), 2);\n    }\n    // 挂载\n    this.controller.mount();\n    // 监听大小变化\n    window.addEventListener(\"resize\", () => {\n      this.controller.resize();\n    });\n  }\n\n  /**\n   * 暂停\n   */\n  public pause() {\n    this.controller.pause();\n  }\n  /**\n   * 开始\n   */\n  public start() {\n    this.controller.start();\n  }\n  /**\n   * 跳转\n   */\n  public skip(time: number) {\n    this.controller.skip(time);\n  }\n  /**\n   * 当前时间\n   * @returns number\n   */\n  public time() {\n    return this.controller.getTime();\n  }\n  /**\n   * 重置弹幕尺寸\n   */\n  public resize() {\n    this.controller.resize();\n  }\n  /**\n   * 重置弹幕\n   */\n  public reset() {\n    this.controller.resetDanmaku(1);\n    this.controller.reset();\n  }\n  /**\n   * 添加事件监听\n   * @param event\n   * @param callback\n   */\n  public listenerEvent(event: DanmakuEventType, callback: (data: any) => void) {\n    DanmakuEvent.listener(event, callback);\n  }\n}\n\n// 添加进全局\nif (typeof globalThis !== \"undefined\") {\n  globalThis.MFADE = MFADE;\n} else {\n  window[\"MFADE\"] = MFADE;\n}\n"],"names":["module","exports","cssWithMappingToString","list","toString","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","id","_i","push","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","call","slice","constructor","name","Array","from","test","len","arr2","Symbol","iterator","_arr","_n","_d","_s","_e","next","done","value","err","isArray","_item","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot"],"sourceRoot":""}